<br />
<div id="journeyForm" class="jumbotron-fluid">
  <div class="card-header row align-items-start">
    <h2 class="col">Chercher un itinéraire</h2>
    <button type="button" class="btn btn-info col-1" (click)="staticModal.show()">Aide</button>
  </div>

  <form action="#" autocomplete="off" (ngSubmit)="submitJourney()">
    <div class="form-row">
      <div class="form-group col-5">
        <label for="fromJourney"><small>Mise en train <b>*</b></small></label>
        <input type="search" name="fromJourney" id="fromJourney"
            class="form-control form-control-lg"
            [class.is-invalid]="noResultFrom"
            placeholder="Toulon" [(ngModel)]="stationFrom.name"
            (keydown)="stopSearchDelay($event)" (keyup)="startSearchDelayed($event, stationFrom.name, SearchOption.FROM_INPUT)"
            [typeahead]="stationService.fromSearchObservable" [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="maxScroll"
            (typeaheadOnSelect)="getStationId($event, 'from')"
            (typeaheadNoResults)="typeaheadNoResults($event, SearchOption.FROM_INPUT)"
            typeaheadOptionField="name" [typeaheadAsync]="true" [isAnimated]="true" [adaptivePosition]="true" pattern="[A-Z|a-z]"
        required />
      </div>

      <div class="form-group offset-1">
        <label for="dateTimeJourney"><small>Date du voyage <b>*</b></small></label>
        <input type="text" class="form-control form-control-lg" name="dateTimeJourney" id="dateTimeJourney"
               [placeholder]="placeholderDate"
               [(ngModel)]="dateJourney" bsDatepicker [bsValue]="today" [minDate]="today"
               [bsConfig]="{dateInputFormat: 'YYYY-MM-DD', isAnimated: true, adaptivePosition: true, containerClass: 'theme-blue'}">
        <!--
        <input type="date" class="form-control form-control-lg" name="dateTimeJourney" id="dateTimeJourney"
               placeholder="jj/MM/yyyy" [(ngModel)]="dateJourney">
               -->
      </div>
    </div>

    <div class="form-row">
      <div class="form-group col-5">
        <label for="toJourney"><small>Destination <b>*</b></small></label>
        <input type="search" name="toJourney" id="toJourney"
            class="form-control form-control-lg"
            [class.is-invalid]="noResultTo"
            placeholder="Seignosse" [(ngModel)]="stationTo.name"
            (keydown)="stopSearchDelay($event)" (keyup)="startSearchDelayed($event, stationTo.name, SearchOption.TO_INPUT)"
            [typeahead]="stationService.toSearchObservable" [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="maxScroll"
            (typeaheadOnSelect)="getStationId($event, 'to')"
            (typeaheadNoResults)="typeaheadNoResults($event, SearchOption.TO_INPUT)"
            typeaheadOptionField="name" [typeaheadAsync]="true" [isAnimated]="true" [adaptivePosition]="true"
            ngModel pattern="[A-Za-z]*"
        required />
      </div>

      <div class="form-group offset-1">
        <label for="timeJourney"><small>Heure du voyage</small></label>
        <timepicker id="timeJourney" [showMeridian]="false" [showSpinners]="false" [showSeconds]="true">
        </timepicker>
      </div>
    </div>

    <button type="submit" class="btn btn-outline-primary btn-lg">Rechercher</button>
  </form>
</div>

<div>
  <ul>
    <li *ngFor="let journey of journeys">
      {{ journey.from.name }} -> {{ journey.to.name }} ({{ journey.dateTime.toString }})
      <br />
      {{ journey.firstTransportation }} -> {{ journey.lastTransportation }}
    </li>
  </ul>
</div>



<div class="modal fade" bsModal #staticModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Chercher un trajet</h4>
      </div>

      <div class="modal-body text-center">
        Entrez la ville dont vous souhaitez partir, la ville d'arrivée, et votre date de départ.
        <br />
        <i>L'heure est facultative</i>
      </div>

      <div class="modal-footer">
        <small><i>Cliquez n'importe où pour fermer</i></small>
      </div>
    </div>
  </div>
</div>
